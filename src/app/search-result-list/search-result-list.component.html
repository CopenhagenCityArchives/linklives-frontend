<section class="lls-results-header">
    <div class="container-fluid">
        <form (ngSubmit)="searchSimple()" class="lls-row">
            <div class="lls-columns-8 lls-columns-6--md">
                <label for="query">Fritekst</label>
                <div class="input-group">
                    <input
                        [(ngModel)]="query"
                        type="text"
                        placeholder="Søg i livsforløb eller kilder"
                        class="input-field input-field-left"
                        id="query"
                        name="query"
                    />
                </div>
            </div>
            <div class="lls-columns-2 lls-columns-3--md">
                <p>Resultattype</p>
                <div class="lls-results-header__checkboxes">
                    <div class="lls-results-header__checkbox-container">
                        <input
                            [(ngModel)]="indexSource"
                            type="checkbox"
                            class="lls-results-header__checkbox"
                            id="indexSource-checkbox"
                            name="indexSource"
                        >
                        <label for="indexSource-checkbox">Kilder</label>
                    </div>
                    <div class="lls-results-header__checkbox-container">
                        <input
                            [(ngModel)]="indexLifecourse"
                            type="checkbox"
                            class="lls-results-header__checkbox"
                            id="indexLifecourse-checkbox"
                            name="indexLifecourse"
                        >
                        <label for="indexLifecourse-checkbox">Livsforløb</label>
                    </div>
                </div>
            </div>
            <div class="lls-results-header__right-section lls-columns-2 lls-columns-3--md">
                <a routerLink="/user/search-history" class="lls-results-header__history-link">
                    <p>Min søgehistorik</p>
                </a>
                <button
                    type="submit"
                    class="lls-btn lls-btn--blue"
                >
                    <span>Søg</span>
                </button>
            </div>
        </form>
    </div>
</section>
<div class="container-fluid">
    <div>
        <div>
            <div class="p-2">{{ searchResult.totalHits }} resultater</div>
        </div>

        <div>
            <ul class="nav nav-tabs nav-fill">
                <li class="nav-item d-flex">
                    <a class="nav-link flex-fill" [routerLink]="['./', { 'page': 1 } ]" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" [queryParams]="{query: this.query }">
                        <p>
                            <strong class="align-middle">Alle</strong>
                        </p>
                        <p>
                            <small>Både livsforløb, og indtastede kilder.</small>
                        </p>
                    </a>
                </li>
                <li class="nav-item d-flex">
                    <a class="nav-link flex-fill d-inline align-middle" [routerLink]="['./', { 'page': 1 } ]" routerLinkActive="active" [queryParams]="{query: this.query, index: 'lifecourses'}">
                        <span class="align-middle">
                            <p>
                                <strong>Livsforløb</strong><span *ngIf="searchResult.indexHits.lifeCourses"> ({{ searchResult.indexHits.lifeCourses}})</span>
                            </p>
                            <p>
                                <small>Mulige livsforløb sammensat af indtastede kilder.</small>
                            </p>
                        </span>
                    </a>
                </li>
                <li class="nav-item d-flex">
                    <a class="nav-link flex-fill d-inline align-middle" [routerLink]="['./', { 'page': 1 } ]" routerLinkActive="active" [queryParams]="{query: this.query, index: 'pas'}">
                        <p>
                            <strong>Indtastede kilder</strong><span *ngIf="searchResult.indexHits.pas"> ({{ searchResult.indexHits.pas}})</span>
                        </p>
                        <p>
                            <small>Personregistreringer fra f.eks. folketællinger og kirkebøger.</small>
                        </p>
                    </a>
                </li>
            </ul>

            <div>
                <div>
                    <ng-container *ngFor="let hit of searchResult.hits" [ngSwitch]="hit.type">
                        <app-person-appearance-item *ngSwitchCase="'pas'" class="mx-2" [item]="hit.pa"></app-person-appearance-item>
                        <app-life-course-item *ngSwitchCase="'lifecourses'" class="mx-2" [item]="hit.pas" [lifecourse-id]="hit.life_course_id"></app-life-course-item>
                    </ng-container>
                </div>

                <div>
                    <nav>
                        <ul class="pagination justify-content-center mb-0">
                            <li class="page-item" [ngClass]="{ disabled: pagination.current === 1}">
                                <a class="page-link" [tabindex]=" pagination.current === 1 ? -1 : 0" [routerLink]="['./', { 'size': pagination.size, 'page': pagination.current - 1 } ]" [queryParams]="{query: query, index: index}">Forrige</a>
                            </li>
                            
                            <li *ngFor="let page of pagination.navigationPages" class="page-item" [ngClass]="{ disabled: pagination.current === page }">
                                <a class="page-link" [routerLink]="['./', { 'size': pagination.size, 'page': page } ]" [queryParams]="{query: this.query, index: index}">{{ page }}</a>
                            </li>

                            <li class="page-item" [ngClass]="{ disabled: pagination.current >= pagination.last }">
                                <a class="page-link" [tabindex]="pagination.current >= pagination.last ? -1 : 0"  [routerLink]="['./', { 'size': pagination.size, 'page': pagination.last } ]" [queryParams]="{query: query, index: index}">Næste</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>