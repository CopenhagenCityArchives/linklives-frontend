<div class="container-fluid">
    <div class="row justify-content-center my-4">
        <div class="col-md-auto">
            <span>
                <strong>S√∏gning:</strong> <span>{{ query }}</span>
                <a routerLink="/search/simple" [queryParams]="{query: this.query}" class="ml-2">Redig√©r s√∏gning</a>
            </span>
        </div>
    </div>

    <a routerLink="/user/search-history">Min s√∏gehistorik</a>

    <h4>S√∏geresultater</h4>

    <div class="row">
        <div class="col-md-2">
            <div><a [routerLink]="">Gem s√∏gning</a></div>
            <div><a [routerLink]="">Download</a></div>
        </div>
        <div class="col"></div>
        <div class="col-md-auto text-center">
            <label>Visning</label>

            <div class="form-check">
                <input class="form-check-input" type="radio" name="view" value="list">
                <label class="form-check-label">Liste</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="view" value="block">
                <label class="form-check-label">Blok</label>
            </div>
        </div>
        <div class="col-md-auto text-center">
            <label>Sorter efter</label>
            <select class="form-control">
                <option>Sikkerhed</option>
            </select>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2 m-2">
            <div class="border p-2">{{ searchResult.totalHits }} resultater</div>
        </div>

        <div class="col-md">
            <ul class="row nav nav-tabs nav-fill">
                <li class="nav-item d-flex col-4">
                    <a class="nav-link flex-fill" [routerLink]="['./', { 'start': 0 } ]" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" [queryParams]="{query: this.query }">
                        <p>
                            <strong class="align-middle">Alle</strong>
                        </p>
                        <p>
                            <small>B√•de livsforl√∏b, og indtastede kilder.</small>
                        </p>
                    </a>
                </li>
                <li class="nav-item d-flex col-4">
                    <a class="nav-link flex-fill d-inline align-middle" [routerLink]="['./', { 'start': 0 } ]" routerLinkActive="active" [queryParams]="{query: this.query, index: 'lifecourses'}">
                        <span class="align-middle">
                            <p>
                                <strong>Livsforl√∏b</strong><span *ngIf="searchResult.indexHits.lifeCourses"> ({{ searchResult.indexHits.lifeCourses}})</span>
                            </p>
                            <p>
                                <small>Mulige livsforl√∏b sammensat af indtastede kilder.</small>
                            </p>
                        </span>
                    </a>
                </li>
                <li class="nav-item d-flex col-4">
                    <a class="nav-link flex-fill d-inline align-middle" [routerLink]="['./', { 'start': 0 } ]" routerLinkActive="active" [queryParams]="{query: this.query, index: 'pas'}">
                        <p>
                            <strong>Indtastede kilder</strong><span *ngIf="searchResult.indexHits.pas"> ({{ searchResult.indexHits.pas}})</span>
                        </p>
                        <p>
                            <small>Personregistreringer fra f.eks. folket√¶llinger og kirkeb√∏ger.</small>
                        </p>
                    </a>
                </li>
            </ul>

            <div class="row">
                <div class="container-fluid border border-top-0">
                    <div class="row my-2">
                        <nav class="col-md-12">
                            <ul class="pagination justify-content-center mb-0">
                                <li class="page-item" [ngClass]="{ disabled: page === 1}">
                                    <a class="page-link" [tabindex]="page === 1 ? -1 : 0" [routerLink]="['./', { 'start': start - size } ]" [queryParams]="{query: query, index: index}">Forrige</a>
                                </li>
                                
                                <li *ngFor="let pageItem of pages" class="page-item" [ngClass]="{ disabled: page === pageItem.page }">
                                    <a class="page-link" [routerLink]="['./', { 'start': pageItem.start } ]" [queryParams]="{query: this.query, index: index}">{{ pageItem.page }}</a>
                                </li>

                                <li class="page-item" [ngClass]="{ disabled: page * size >= searchResult.totalHits}">
                                    <a class="page-link" [tabindex]="page * size >= searchResult.totalHits ? -1 : 0"  [routerLink]="['./', { 'start': start + size } ]" [queryParams]="{query: query, index: index}">N√¶ste</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div *ngFor="let hit of searchResult.hits" class="row border p-2 mx-2 mb-2" [ngSwitch]="hit.type">
                        <ng-container *ngSwitchCase="'pas'">
                            <div class="col-md-4">
                                <span>üïÆ</span>
                            </div>
                            <div class="col-md-4">
                                <div>
                                    {{ hit.pa.name}}
                                </div>
                                <div class="text-capitalize" *ngIf="hit.pa.Sogn">
                                    <strong>Sogn:</strong> {{ hit.pa.Sogn}}
                                </div>
                                <div class="text-capitalize" *ngIf="hit.pa.Herred">
                                    <strong>Herred:</strong> {{ hit.pa.Herred}}
                                </div>
                                <div class="text-capitalize" *ngIf="hit.pa.Amt">
                                    <strong>Amt:</strong> {{ hit.pa.Amt}}
                                </div>
                            </div>
                            <div class="col-md-4 d-flex justify-content-end">
                                <button [routerLink]="['/pa', hit.pa.source_id + '-' + hit.pa.pa_id]" [state]="{ data: hit.pa }" class="btn btn-info align-self-end">V√¶lg kilde</button>
                            </div>
                        </ng-container>
                        <ng-container *ngSwitchCase="'lifecourses'">
                            <div class="col-md-4">
                                üîó {{ hit.pas.length }} kilder
                            </div>
                            <div class="col-md-4">
                                <div class="text-capitalize">
                                    {{ hit.pas[0].name_std}}
                                </div>
                                <div class="text-capitalize" *ngIf="hit.pas[0].parish_std">
                                    <strong>Sogn:</strong> {{ hit.pas[0].parish_std}}
                                </div>
                                <div class="text-capitalize" *ngIf="hit.pas[0].district_cl">
                                    <strong>Herred:</strong> {{ hit.pas[0].district_cl}}
                                </div>
                                <div class="text-capitalize" *ngIf="hit.pas[0].county_std">
                                    <strong>Amt:</strong> {{ hit.pas[0].county_std}}
                                </div>
                            </div>
                            <div class="col-md-4 d-flex justify-content-end">
                                <button [routerLink]="['/life-course', hit.life_course_id]" [state]="{ data: hit.pas }"  class="btn btn-info align-self-end">V√¶lg livsforl√∏b</button>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>